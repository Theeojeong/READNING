# ğŸ“„ page íŒŒë¼ë¯¸í„° ì™„ë²½ ê°€ì´ë“œ

`page`ê°€ ë¬´ì—‡ì´ê³ , ì–¸ì œ í•„ìš”í•œì§€ ëª…í™•í•˜ê²Œ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## ğŸ¤” pageê°€ ë­”ê°€ìš”?

### **ê°„ë‹¨íˆ:**
> **"ê°™ì€ ì±…(book_title)ì„ ì—¬ëŸ¬ ë²ˆ ë‚˜ëˆ ì„œ ì—…ë¡œë“œí•  ë•Œ êµ¬ë¶„í•˜ëŠ” ë²ˆí˜¸"**

---

## ğŸ“Š ì‹¤ì œ ì˜ˆì‹œ

### **ì˜ˆì‹œ 1: ì§§ì€ ì†Œì„¤ (page ë¶ˆí•„ìš”)**

```
ğŸ“– "ìš´ìˆ˜ ì¢‹ì€ ë‚ " (1ë§Œ ì)
   â†“
[ì „ì²´ë¥¼ í•œ íŒŒì¼ë¡œ ì—…ë¡œë“œ]
   â†“
POST /generate/music-v3-long
- file: "ìš´ìˆ˜ì¢‹ì€ë‚ _ì „ì²´.txt"
- book_title: "ìš´ìˆ˜ì¢‹ì€ë‚ "
- page: 1  â† ì „ì²´ê°€ page 1

ê²°ê³¼:
â””â”€ page 1 â†’ ì „ì²´ ë‚´ìš© â†’ chunks 2ê°œ
```

---

### **ì˜ˆì‹œ 2: ê¸´ ì†Œì„¤ (page í•„ìš”)**

```
ğŸ“– "í•´ë¦¬í¬í„°" (10ë§Œ ì)
   â†“
[ë„ˆë¬´ ê¸¸ì–´ì„œ 3ê°œ íŒŒì¼ë¡œ ë‚˜ëˆ”]
   â†“
1ì°¨: POST /generate/music-v3-long
- file: "í•´ë¦¬í¬í„°_1-5ì¥.txt"  (3ë§Œ ì)
- book_title: "í•´ë¦¬í¬í„°"
- page: 1  â† 1ë¶€

2ì°¨: POST /generate/music-v3-long
- file: "í•´ë¦¬í¬í„°_6-10ì¥.txt"  (3ë§Œ ì)
- book_title: "í•´ë¦¬í¬í„°"  
- page: 2  â† 2ë¶€

3ì°¨: POST /generate/music-v3-long
- file: "í•´ë¦¬í¬í„°_11-15ì¥.txt"  (4ë§Œ ì)
- book_title: "í•´ë¦¬í¬í„°"
- page: 3  â† 3ë¶€

ê²°ê³¼:
â”œâ”€ page 1 â†’ 1-5ì¥ â†’ chunks 15ê°œ
â”œâ”€ page 2 â†’ 6-10ì¥ â†’ chunks 12ê°œ
â””â”€ page 3 â†’ 11-15ì¥ â†’ chunks 18ê°œ
```

---

## ğŸ—„ï¸ MySQLì— ì €ì¥ë˜ëŠ” ë°©ì‹

```sql
-- chapters í…Œì´ë¸”
book_id: "alice_í•´ë¦¬í¬í„°"
â”œâ”€ page: 1, total_duration: 240
â”œâ”€ page: 2, total_duration: 240
â””â”€ page: 3, total_duration: 240

-- chunks í…Œì´ë¸”
chapter_id=1 (page 1)
â”œâ”€ chunk 1, 2, 3... (1-5ì¥ì˜ ì²­í¬ë“¤)

chapter_id=2 (page 2)
â”œâ”€ chunk 1, 2, 3... (6-10ì¥ì˜ ì²­í¬ë“¤)

chapter_id=3 (page 3)
â”œâ”€ chunk 1, 2, 3... (11-15ì¥ì˜ ì²­í¬ë“¤)
```

---

## ğŸ¯ ì–¸ì œ ì‚¬ìš©í•˜ë‚˜ìš”?

### âœ… **pageë¥¼ ë³€ê²½í•´ì•¼ í•˜ëŠ” ê²½ìš°:**

1. **ê¸´ ì±…ì„ ì—¬ëŸ¬ íŒŒì¼ë¡œ ë‚˜ëˆ ì„œ ì—…ë¡œë“œ**
   ```
   file1.txt â†’ page=1
   file2.txt â†’ page=2
   file3.txt â†’ page=3
   ```

2. **ì±…ì„ ë¶€ë¶„ì ìœ¼ë¡œ ì¬ìƒì„±**
   ```
   page=2ë§Œ ë‹¤ì‹œ ìƒì„±í•˜ê³  ì‹¶ì„ ë•Œ
   â†’ page=2ë¡œ ì¬ì—…ë¡œë“œ
   ```

3. **ì—¬ëŸ¬ ì±•í„°ë¥¼ ë”°ë¡œ ê´€ë¦¬**
   ```
   1ë¶€ â†’ page=1
   2ë¶€ â†’ page=2
   ì—í•„ë¡œê·¸ â†’ page=99
   ```

---

### âŒ **pageë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²½ìš° (ëŒ€ë¶€ë¶„):**

1. **ì§§ì€/ì¤‘ê°„ ê¸¸ì´ í…ìŠ¤íŠ¸**
   ```
   5,000ì ì†Œì„¤ â†’ page=1ë§Œ ì‚¬ìš©
   ```

2. **í•œ íŒŒì¼ì— ì „ì²´ ë‚´ìš©**
   ```
   ì „ì²´.txt â†’ page=1ë¡œ ì¶©ë¶„
   ```

3. **ì¼ë°˜ì ì¸ ì‚¬ìš©**
   ```
   ëŒ€ë¶€ë¶„ page=1ë§Œ ì‚¬ìš©
   ```

---

## ğŸ†• ìë™ í˜ì´ì§€ ë¶„í•  API (NEW!)

page ì…ë ¥ì´ ê·€ì°®ë‹¤ë©´ ìë™ ë¶„í•  APIë¥¼ ì‚¬ìš©í•˜ì„¸ìš”:

### **`POST /generate/music-auto`**

```python
# page íŒŒë¼ë¯¸í„° ì—†ìŒ!
POST /generate/music-auto
{
    "file": "ê¸´ì†Œì„¤.txt",  (50,000ì)
    "user_id": "alice",
    "book_title": "ê¸´ì†Œì„¤",
    # page ì—†ìŒ!
}

ìë™ ì²˜ë¦¬:
â†’ 50,000ìë¥¼ 6,000ì ë‹¨ìœ„ë¡œ ìë™ ë¶„í• 
â†’ page 1, 2, 3, ..., 9 ìë™ ìƒì„±
â†’ ê° í˜ì´ì§€ë³„ ìŒì•… ìƒì„±
â†’ MySQL ìë™ ì €ì¥

ì‘ë‹µ:
{
    "total_pages": 9,
    "pages": [
        {"page": 1, "chunks": 5},
        {"page": 2, "chunks": 4},
        ...
        {"page": 9, "chunks": 3}
    ]
}
```

---

## ğŸ“‹ API ì„ íƒ ê°€ì´ë“œ

### **ì–´ë–¤ APIë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë‚˜ìš”?**

| ìƒí™© | ì¶”ì²œ API | ì´ìœ  |
|------|---------|------|
| ì§§ì€ í…ìŠ¤íŠ¸ (<10,000ì) | `/music-v3-long` (page=1) | ë¹ ë¥´ê³  ê°„ë‹¨ |
| ê¸´ í…ìŠ¤íŠ¸ (>20,000ì) | `/music-auto` âœ¨ | ìë™ ë¶„í• , ì•ˆì „ |
| ì—¬ëŸ¬ íŒŒì¼ ë‚˜ëˆ ì„œ ì—…ë¡œë“œ | `/music-v3-long` (page ë³€ê²½) | ìˆ˜ë™ ì œì–´ |
| ê·€ì°®ë‹¤! ìë™ìœ¼ë¡œ! | `/music-auto` âœ¨ | page ì…ë ¥ ë¶ˆí•„ìš” |

---

## ğŸ¬ ì›¹ì—ì„œ ë³´ëŠ” ë°©ë²•

### **pageê°€ ì—¬ëŸ¬ ê°œì¸ ê²½ìš°:**

```javascript
// page 1 ë³´ê¸°
http://localhost:8000/scrollama/dynamic-reader.html?user_id=alice&book_title=í•´ë¦¬í¬í„°&page=1

// page 2 ë³´ê¸°
http://localhost:8000/scrollama/dynamic-reader.html?user_id=alice&book_title=í•´ë¦¬í¬í„°&page=2

// page 3 ë³´ê¸°
http://localhost:8000/scrollama/dynamic-reader.html?user_id=alice&book_title=í•´ë¦¬í¬í„°&page=3
```

**í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜:**
- "< ì´ì „ í˜ì´ì§€" ë²„íŠ¼ â†’ `page=1`
- "ë‹¤ìŒ í˜ì´ì§€ >" ë²„íŠ¼ â†’ `page=2`

---

## ğŸ’¡ ê²°ë¡ 

### **page íŒŒë¼ë¯¸í„°ì˜ ì—­í• :**

```
page = "ì´ íŒŒì¼ì´ ì±…ì˜ ëª‡ ë²ˆì§¸ ë¶€ë¶„ì¸ì§€"

ë¹„ìœ :
- ì±…ì„ 3ê¶Œìœ¼ë¡œ ë‚˜ëˆ  ì¶œíŒí•œë‹¤ë©´
  â†’ 1ê¶Œ, 2ê¶Œ, 3ê¶Œ
  â†’ page=1, page=2, page=3

- ë“œë¼ë§ˆë¥¼ ì‹œì¦Œìœ¼ë¡œ ë‚˜ëˆˆë‹¤ë©´
  â†’ ì‹œì¦Œ 1, ì‹œì¦Œ 2, ì‹œì¦Œ 3
  â†’ page=1, page=2, page=3
```

### **ëŒ€ë¶€ë¶„ì˜ ê²½ìš°:**
- âœ… **page=1ë§Œ ì‚¬ìš©** (íŒŒì¼ í•˜ë‚˜ = ì „ì²´)
- âœ… í•„ìš”í•˜ë©´ ë³€ê²½
- âœ… ë˜ëŠ” `/music-auto` ì‚¬ìš© (ì™„ì „ ìë™)

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

main.pyì— ìƒˆ ë¼ìš°í„°ë¥¼ ì¶”ê°€í–ˆìœ¼ë‹ˆ ì„œë²„ë¥¼ ì¬ì‹œì‘í•˜ë©´:

```
http://localhost:8000/docs

ìƒˆë¡œìš´ ì—”ë“œí¬ì¸íŠ¸:
âœ¨ POST /generate/music-auto  (ìë™ í˜ì´ì§€ ë¶„í• )
```

ì´ì œ ëª…í™•í•´ì§€ì…¨ë‚˜ìš”? ğŸ˜Š

**ìš”ì•½:**
- `page` = ê°™ì€ ì±…ì˜ "ëª‡ ë²ˆì§¸ íŒŒíŠ¸"ì¸ì§€ êµ¬ë¶„í•˜ëŠ” ë²ˆí˜¸
- ëŒ€ë¶€ë¶„ 1ë§Œ ì‚¬ìš©
- ìë™ ë¶„í•  ì›í•˜ë©´ `/music-auto` ì‚¬ìš©!
