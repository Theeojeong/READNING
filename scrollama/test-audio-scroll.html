<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrollama + Audio í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }

        #intro {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        #intro h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        #intro p {
            font-size: 1.5rem;
            opacity: 0.9;
        }

        #scrolly {
            position: relative;
            display: flex;
            padding: 40px 0;
            background: white;
        }

        article {
            position: relative;
            padding: 0;
            width: 45%;
            margin-left: 5%;
        }

        .step {
            margin: 0 auto 150vh 0;
            padding: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            opacity: 0.3;
            transition: all 0.3s ease;
        }

        .step.active {
            opacity: 1;
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3);
            transform: scale(1.02);
        }

        .step:last-child {
            margin-bottom: 50vh;
        }

        .step h2 {
            font-size: 2rem;
            color: #667eea;
            margin-bottom: 15px;
        }

        .step p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #555;
        }

        figure {
            position: sticky;
            width: 20%;
            height: 100vh;
            top: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .audio-container {
            text-align: center;
            color: white;
            padding: 40px;
        }

        .audio-title {
            font-size: 2rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        audio {
            width: 100%;
            max-width: 400px;
            margin: 20px 0;
            filter: brightness(0.95);
        }

        .audio-info {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 20px;
        }

        .waveform {
            width: 300px;
            height: 100px;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .bar {
            width: 6px;
            height: 20px;
            background: rgba(255,255,255,0.6);
            border-radius: 3px;
            animation: wave 1s ease-in-out infinite;
        }

        .bar:nth-child(1) { animation-delay: 0s; }
        .bar:nth-child(2) { animation-delay: 0.1s; }
        .bar:nth-child(3) { animation-delay: 0.2s; }
        .bar:nth-child(4) { animation-delay: 0.3s; }
        .bar:nth-child(5) { animation-delay: 0.4s; }
        .bar:nth-child(6) { animation-delay: 0.5s; }
        .bar:nth-child(7) { animation-delay: 0.6s; }

        @keyframes wave {
            0%, 100% { height: 20px; }
            50% { height: 80px; }
        }

        #outro {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 2rem;
            text-align: center;
            padding: 20px;
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.1s ease;
            z-index: 1000;
        }

        .instructions {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.95);
            padding: 15px 30px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-size: 0.9rem;
            color: #667eea;
            z-index: 100;
            animation: fadeIn 1s ease-in;
        }

        .play-hint {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(102, 126, 234, 0.95);
            color: white;
            padding: 40px 60px;
            border-radius: 20px;
            font-size: 1.5rem;
            text-align: center;
            z-index: 2000;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .play-hint:hover {
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 15px 50px rgba(0,0,0,0.4);
        }

        .play-hint.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        @media (max-width: 768px) {
            #scrolly {
                flex-direction: column;
            }
            
            article, figure {
                width: 100%;
            }
            
            figure {
                position: relative;
                height: 50vh;
            }
            
            article {
                margin-left: 0;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progressBar"></div>
    
    <section id="intro">
        <h1>ğŸ“œ Scrollama + Audio ë°ëª¨</h1>
        <p>ìŠ¤í¬ë¡¤í•˜ë©´ì„œ ì´ì•¼ê¸°ë¥¼ ì½ê³  ìŒì•…ì„ ê°ìƒí•˜ì„¸ìš”</p>
        <div style="margin-top: 40px; font-size: 3rem; animation: bounce 2s ease-in-out infinite;">â¬‡ï¸</div>
    </section>

    <section id="scrolly">
        <article>
            <div class="step" data-step="1" data-audio="audio1">
                <h2>ğŸŒ… ì‹œì‘</h2>
                <p>
                    ìƒˆë¡œìš´ í•˜ë£¨ê°€ ì‹œì‘ë©ë‹ˆë‹¤. 
                    ì°½ë°–ìœ¼ë¡œ ë¶€ë“œëŸ¬ìš´ í–‡ì‚´ì´ ë“¤ì–´ì˜¤ê³ , 
                    ìƒˆë“¤ì˜ ì§€ì €ê·ì´ ë“¤ë¦½ë‹ˆë‹¤.
                    ì˜¤ëŠ˜ì€ ì–´ë–¤ ì´ì•¼ê¸°ë¥¼ ë§Œë“¤ì–´ê°ˆê¹Œìš”?
                </p>
                <p style="margin-top: 15px; color: #999; font-size: 0.9rem;">
                    ğŸ’¡ ì˜¤ë¥¸ìª½ì— ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤
                </p>
            </div>

            <div class="step" data-step="2" data-audio="audio2">
                <h2>ğŸš¶ ì—¬ì •</h2>
                <p>
                    ì²« ë°œê±¸ìŒì„ ë‚´ë”›ìŠµë‹ˆë‹¤. 
                    ê¸¸ì€ ë•Œë¡œëŠ” í‰íƒ„í•˜ê³ , ë•Œë¡œëŠ” í—˜ë‚œí•©ë‹ˆë‹¤.
                    í•˜ì§€ë§Œ ëª¨ë“  ìˆœê°„ì´ ì˜ë¯¸ ìˆëŠ” ê²½í—˜ì´ ë©ë‹ˆë‹¤.
                    ìŒì•…ê³¼ í•¨ê»˜ ì²œì²œíˆ ê±¸ì–´ê°€ë´…ì‹œë‹¤.
                </p>
            </div>

            <div class="step" data-step="3" data-audio="audio3">
                <h2>ğŸŒŸ ë°œê²¬</h2>
                <p>
                    ì—¬ì • ì¤‘ì— íŠ¹ë³„í•œ ê²ƒì„ ë°œê²¬í•©ë‹ˆë‹¤.
                    ì‘ì€ ê²ƒì—ì„œë„ í° ì˜ë¯¸ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    ë•Œë¡œëŠ” ë©ˆì¶°ì„œ ì£¼ë³€ì„ ë‘˜ëŸ¬ë³´ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤.
                    ì´ ìˆœê°„ì„ ìŒì•…ê³¼ í•¨ê»˜ ëŠê»´ë³´ì„¸ìš”.
                </p>
            </div>

            <div class="step" data-step="4" data-audio="audio4">
                <h2>ğŸŒˆ ì ˆì •</h2>
                <p>
                    ì´ì•¼ê¸°ëŠ” í´ë¼ì´ë§¥ìŠ¤ì— ë„ë‹¬í•©ë‹ˆë‹¤.
                    ëª¨ë“  ê²½í—˜ì´ í•˜ë‚˜ë¡œ ëª¨ì—¬ ì•„ë¦„ë‹¤ìš´ ìˆœê°„ì„ ë§Œë“­ë‹ˆë‹¤.
                    ìŒì•…ì´ ë”ìš± í’ì„±í•´ì§€ê³ , ê°ì •ì´ ê³ ì¡°ë©ë‹ˆë‹¤.
                    ì´ íŠ¹ë³„í•œ ìˆœê°„ì„ ë§Œë½í•˜ì„¸ìš”.
                </p>
            </div>

            <div class="step" data-step="5" data-audio="audio5">
                <h2>ğŸŒ™ ë§ˆë¬´ë¦¬</h2>
                <p>
                    ëª¨ë“  ì—¬ì •ì—ëŠ” ëì´ ìˆìŠµë‹ˆë‹¤.
                    í•˜ì§€ë§Œ ëì€ ë˜ ë‹¤ë¥¸ ì‹œì‘ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
                    ì˜¤ëŠ˜ì˜ ê²½í—˜ì„ ê°€ìŠ´ì— ë‹´ê³ ,
                    ë‚´ì¼ì˜ ìƒˆë¡œìš´ ì´ì•¼ê¸°ë¥¼ ê¸°ëŒ€í•´ë´…ë‹ˆë‹¤.
                </p>
            </div>
        </article>

        <figure>
            <div class="audio-container">
                <div class="audio-title" id="audioTitle">ì˜¤ë””ì˜¤ê°€ ê³§ ì¬ìƒë©ë‹ˆë‹¤</div>
                <div class="waveform">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
                <audio id="audioPlayer" controls>
                    <source src="" type="audio/mpeg">
                    ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </audio>
                <div class="audio-info" id="audioInfo">
                    ìŠ¤í¬ë¡¤í•˜ì—¬ ë‹¤ìŒ ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”
                </div>
            </div>
        </figure>
    </section>

    <section id="outro">
        <div>
            <h2>âœ¨ ê°ì‚¬í•©ë‹ˆë‹¤ âœ¨</h2>
            <p style="font-size: 1.2rem; margin-top: 20px;">
                Scrollamaë¥¼ ì´ìš©í•œ ì¸í„°ë™í‹°ë¸Œ ìŠ¤í† ë¦¬í…”ë§
            </p>
        </div>
    </section>

    <!-- ìë™ ì¬ìƒ í™œì„±í™”ë¥¼ ìœ„í•œ íŒíŠ¸ -->
    <div class="play-hint" id="playHint">
        ğŸµ<br>
        í´ë¦­í•˜ì—¬ ì˜¤ë””ì˜¤ ìë™ ì¬ìƒ ì‹œì‘
    </div>

    <script src="build/scrollama.js"></script>
    <script>
        // ì—¬ê¸°ì— ì‹¤ì œ ì˜¤ë””ì˜¤ íŒŒì¼ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì„¸ìš”
        const audioFiles = {
            audio1: 'audio/track1.wav',  // ì‹¤ì œ íŒŒì¼ ê²½ë¡œë¡œ ë³€ê²½
            audio2: 'audio/track2.wav',
            audio3: 'audio/track3.wav',
            audio4: 'audio/track4.mp3',
            audio5: 'audio/track5.mp3'
        };

        const audioTitles = {
            audio1: 'ğŸŒ… ì•„ì¹¨ì˜ ì‹œì‘',
            audio2: 'ğŸš¶ ì—¬ì •ì˜ ìŒì•…',
            audio3: 'ğŸŒŸ ë°œê²¬ì˜ ìˆœê°„',
            audio4: 'ğŸŒˆ í´ë¼ì´ë§¥ìŠ¤',
            audio5: 'ğŸŒ™ í‰í™”ë¡œìš´ ë§ˆë¬´ë¦¬'
        };

        const audioPlayer = document.getElementById('audioPlayer');
        const audioTitle = document.getElementById('audioTitle');
        const audioInfo = document.getElementById('audioInfo');
        const progressBar = document.getElementById('progressBar');
        const playHint = document.getElementById('playHint');

        // ìë™ ì¬ìƒ í™œì„±í™” ìƒíƒœ
        let autoPlayEnabled = false;

        // ì²« í´ë¦­ìœ¼ë¡œ ìë™ ì¬ìƒ í™œì„±í™”
        playHint.addEventListener('click', () => {
            autoPlayEnabled = true;
            playHint.classList.add('hidden');
            console.log('âœ… ìë™ ì¬ìƒì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
            
            // ì²« ë²ˆì§¸ ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œë„
            if (audioPlayer.src) {
                audioPlayer.play().catch(e => console.log('ì¬ìƒ ì‹¤íŒ¨:', e));
            }
        });

        // ìŠ¤í¬ë¡¤í•´ë„ íŒíŠ¸ ìˆ¨ê¸°ê¸°
        let scrolled = false;
        window.addEventListener('scroll', () => {
            if (!scrolled && window.scrollY > 100) {
                scrolled = true;
                autoPlayEnabled = true;
                setTimeout(() => {
                    playHint.classList.add('hidden');
                }, 2000);
            }
        }, { once: false });

        // Scrollama ì´ˆê¸°í™”
        const scroller = scrollama();

        scroller
            .setup({
                step: '.step',
                offset: 0.5,
                debug: false
            })
            .onStepEnter(response => {
                // ì´ì „ active í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
                
                // í˜„ì¬ stepì— active í´ë˜ìŠ¤ ì¶”ê°€
                response.element.classList.add('active');
                
                // ì˜¤ë””ì˜¤ ë³€ê²½
                const audioId = response.element.dataset.audio;
                const audioSrc = audioFiles[audioId];
                const title = audioTitles[audioId];
                
                audioTitle.textContent = title;
                audioInfo.textContent = `Step ${response.index + 1} / 5`;
                
                // ì˜¤ë””ì˜¤ ì†ŒìŠ¤ ë³€ê²½ ë° ìë™ ì¬ìƒ
                audioPlayer.src = audioSrc;
                audioPlayer.load(); // ìƒˆ ì†ŒìŠ¤ ë¡œë“œ
                
                // ğŸµ ìë™ ì¬ìƒ (í™œì„±í™”ëœ ê²½ìš°ë§Œ)
                if (autoPlayEnabled) {
                    audioPlayer.play()
                        .then(() => {
                            console.log(`âœ… ìë™ ì¬ìƒ ì‹œì‘: ${title}`);
                        })
                        .catch(e => {
                            console.log('âš ï¸ ìë™ ì¬ìƒ ì‹¤íŒ¨:', e.message);
                            audioInfo.textContent = 'â–¶ï¸ ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”';
                        });
                }
            })
            .onStepExit(response => {
                response.element.classList.remove('active');
                
                // ğŸµ ìŒì•… ë¶€ë“œëŸ½ê²Œ í˜ì´ë“œ ì•„ì›ƒ
                if (autoPlayEnabled && !audioPlayer.paused) {
                    const fadeOut = setInterval(() => {
                        if (audioPlayer.volume > 0.1) {
                            audioPlayer.volume -= 0.1;
                        } else {
                            clearInterval(fadeOut);
                            audioPlayer.volume = 1.0; // ë‹¤ìŒ ê³¡ì„ ìœ„í•´ ë³¼ë¥¨ ë³µì›
                        }
                    }, 50);
                }
            });

        // ìŠ¤í¬ë¡¤ ì§„í–‰ë¥  í‘œì‹œ
        window.addEventListener('scroll', () => {
            const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (window.scrollY / windowHeight) * 100;
            progressBar.style.width = scrolled + '%';
        });

        // ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬ (ìë™ìœ¼ë¡œ ì²˜ë¦¬ë˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€ ê°€ëŠ¥)
        window.addEventListener('resize', scroller.resize);

        console.log('ğŸµ Scrollama + Audio ë°ëª¨ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');
        console.log('ğŸ“ ì˜¤ë””ì˜¤ íŒŒì¼ì„ audio/ í´ë”ì— ë„£ê³  ê²½ë¡œë¥¼ ìˆ˜ì •í•˜ì„¸ìš”:');
        console.log('   - audio/track1.mp3');
        console.log('   - audio/track2.mp3');
        console.log('   - audio/track3.mp3');
        console.log('   - audio/track4.mp3');
        console.log('   - audio/track5.mp3');
    </script>

    <style>
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
    </style>
</body>
</html>

